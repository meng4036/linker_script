## 3.2 链接器脚本格式
链接器脚本是文本文件。

你可以将链接器脚本写成一连串命令。命令可以是关键字，后面跟有参数，也可以是符号赋值。多条命令使用分号分割，空格将被忽略。

如文件名或格式名之类的字符串可以直接输入。如果文件名中包含如逗号之类的字符，它用来分割多个文件名的字符，需要将文件名放在双引号中。在文件名中禁止使用双引号。

链接器脚本的注释与C语言相同，使用'/*'和'*/'。如C语言，注释在语法上等于空格。

## 3.3 简单链接器脚本示例
许多链接器脚本很简单。

最简单的链接器脚本可能只有一条命令:'SECTIONS'。使用'SECTIONS'命令描述输出文件的内存布局。

'SECTIONS'是相当强大的命令。这里我们将描述一个简单示例。假设你的程序只包含代码、初始化数据和未初始化数据，将它们依次存放在'.text'、'.data'和'.bss'段中。同样假设输入文件中也只有这些段。

本例中，代码需要加载到地址0x10000处，数据需要在地址0x8000000处开始存储。下面这个脚本实现这种布局：
```
     SECTIONS
     {
       . = 0x10000;
       .text : { *(.text) }
       . = 0x8000000;
       .data : { *(.data) }
       .bss : { *(.bss) }
     }
```
书写‘SECTIONS’命令，使用关键字'SECTIONS'，后面跟着用花括号括起来的一连串符号赋值和输出段描述。

在上述'SECTIONS'命令示例中，第一行设置特殊符号'.'的值，它是位置计数器。如果不使用其它方式（下面描述）指明输出段的地址，将使用当前位置计数器的值。存放输出段后，更新位置计数器的值，将位置计数器的值与输出段的大小相加，作为位置计数器的当前值。'SECTIONS'命令开始时，位置计数器的值为'0'。

第二行定义'.text'输出段。在语法上，冒号是必须的，现在先忽略它。输出段名字后面的花括号中，列出需要放入到这个输出段的输入段。'\*'为通配符，匹配所有文件名。表达式'\*(.text)'表示所有输入文件中的所有'.text'段。

定义'.text'输出段时，位置计数器为'0x10000'，链接器将设置'.text'段在输出文件的地址为'0x10000'。

剩余的几行定义了输出文件的'.data'和'.bss'段。链接器将'.data'段放在地址'0x800000'处。在链接器放置'.data'段后，位置计数器的值是'0x8000000'加上'.data'段的大小。效果是'.bss'段紧跟'.data'段存放。

为保证所有段都满足字节对齐要求，链接器会根据需要增加位置计数器的值。在这个示例中，'.data'段和'.bss'段之间，链接器可能在两者之间生成一个小间隙。
